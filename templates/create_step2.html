{% extends "base.html" %}

{% block title %}Step 2: Data Upload - RAG Chatbot Platform{% endblock %}

{% block content %}
<div class="wizard-container">
    <div class="container">
        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step completed">
                <div class="step-number">‚úì</div>
                <div class="step-label">Basic Settings</div>
            </div>
            <div class="step-line completed"></div>
            <div class="step active">
                <div class="step-number">2</div>
                <div class="step-label">Data Upload</div>
            </div>
            <div class="step-line"></div>
            <div class="step">
                <div class="step-number">3</div>
                <div class="step-label">Preview & Test</div>
            </div>
            <div class="step-line"></div>
            <div class="step">
                <div class="step-number">4</div>
                <div class="step-label">Deploy</div>
            </div>
        </div>

        <!-- Form Content -->
        <div class="wizard-content">
            <h1>Data Upload</h1>
            <p class="wizard-description">Upload documents to train your chatbot (PDF, TXT, DOCX)</p>

            <div class="upload-info">
                <p><strong>Chatbot:</strong> <span id="chatbot-name-display"></span></p>
            </div>

            <form id="step2-form" class="wizard-form">
                <div class="form-group">
                    <div class="file-upload-area" id="file-upload-area">
                        <div class="upload-icon">üìÅ</div>
                        <p class="upload-text">Drag and drop files here or click to browse</p>
                        <p class="upload-hint">Supported formats: PDF, TXT, DOCX (Max 50MB per file, up to 10 files)</p>
                        <input 
                            type="file" 
                            id="file-input" 
                            name="files" 
                            multiple 
                            accept=".pdf,.txt,.docx"
                            style="display: none;"
                        >
                    </div>
                    <span class="error-message" id="file-error"></span>
                </div>

                <div id="file-list" class="file-list"></div>

                <div id="upload-progress" class="upload-progress" style="display: none;">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill"></div>
                    </div>
                    <p class="progress-text" id="progress-text">Uploading files...</p>
                </div>

                <div id="processing-status" class="processing-status" style="display: none;">
                    <div class="status-icon">‚öôÔ∏è</div>
                    <p class="status-text">Processing documents and generating embeddings...</p>
                    <div class="spinner"></div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" id="back-btn">Back</button>
                    <button type="submit" class="btn-primary" id="next-btn" disabled>Next: Preview & Test</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/wizard.js') }}"></script>
{% endblock %}
